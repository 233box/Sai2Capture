<Window x:Class="Sai2Capture.Views.HotkeyCaptureDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        xmlns:local="clr-namespace:Sai2Capture.Views"
        mc:Ignorable="d"
        Title="设置快捷键" Height="320" Width="480"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        Topmost="True">
    <Window.Resources>
        <!-- 按钮宽度样式 -->
        <Style x:Key="DialogButtonWidthStyle" TargetType="ui:Button" BasedOn="{StaticResource RoundedUiButtonStyle}">
            <Setter Property="Width" Value="70"/>
            <Setter Property="Margin" Value="5"/>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="70"/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>

        <!-- 提示区域 -->
        <Border Grid.Row="0" Background="Transparent" Margin="16,16,16,8">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="{Binding Status}"
                         FontSize="12"
                         Foreground="#333333"
                         TextAlignment="Center"
                         Margin="5"/>

                <TextBlock Text="按住 Ctrl、Shift、Alt 等修饰键，再按功能键（如 F1-F12）或字母键"
                         FontSize="11"
                         Foreground="#666666"
                         TextAlignment="Center"
                         Margin="5,10,5,3"/>
                <TextBlock Text="按 Enter 确认，按 Esc 取消"
                         FontSize="11"
                         Foreground="#666666"
                         TextAlignment="Center"
                         Margin="5,0"/>
            </StackPanel>
        </Border>

        <!-- 捕获区域 -->
        <Border Grid.Row="1" Background="#F5F5F5" CornerRadius="6" Margin="16,3,16,3"
                BorderBrush="{StaticResource BorderBrush}" BorderThickness="1">
            <Grid>
                <TextBlock Text="{Binding CapturedKeys}"
                         FontSize="18"
                         FontWeight="SemiBold"
                         Foreground="{StaticResource PrimaryBrush}"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"
                         TextAlignment="Center"/>

                <TextBlock Text="请先设置快捷键"
                         FontSize="12"
                         Foreground="#999999"
                         HorizontalAlignment="Center"
                         VerticalAlignment="Center"
                         TextAlignment="Center">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding CapturedKeys}" Value="">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </Grid>
        </Border>

        <!-- 按钮区域 -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
            <ui:Button Content="确定"
                      Appearance="Primary"
                      Click="OKButton_Click">
                <Button.Style>
                    <Style TargetType="ui:Button" BasedOn="{StaticResource DialogButtonWidthStyle}">
                        <Setter Property="IsEnabled" Value="True"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding CapturedKeys}" Value="">
                                <Setter Property="IsEnabled" Value="False"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
            </ui:Button>

            <ui:Button Content="清空"
                      Appearance="Secondary"
                      Click="ClearButton_Click"
                      Style="{StaticResource DialogButtonWidthStyle}"/>

            <ui:Button Content="取消"
                      Appearance="Secondary"
                      Click="CancelButton_Click"
                      Style="{StaticResource DialogButtonWidthStyle}"/>
        </StackPanel>
    </Grid>
</Window>